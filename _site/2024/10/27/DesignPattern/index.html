<!doctype html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/grids-responsive-min.css">
  <link rel="stylesheet" href="/assets/styles.css"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>设计模式 | Liujiyu’s blog</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="设计模式" />
<meta name="author" content="liujiyu" />
<meta property="og:locale" content="en" />
<meta name="description" content="一、创建型模式" />
<meta property="og:description" content="一、创建型模式" />
<link rel="canonical" href="http://localhost:4000/2024/10/27/DesignPattern/" />
<meta property="og:url" content="http://localhost:4000/2024/10/27/DesignPattern/" />
<meta property="og:site_name" content="Liujiyu’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-10-27T10:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="设计模式" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"liujiyu","url":"https://github.com/Liujiyu20000308"},"dateModified":"2024-10-27T10:00:00+08:00","datePublished":"2024-10-27T10:00:00+08:00","description":"一、创建型模式","headline":"设计模式","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2024/10/27/DesignPattern/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/head.jpg"},"name":"liujiyu"},"url":"http://localhost:4000/2024/10/27/DesignPattern/"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Liujiyu's blog" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } });
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
                       });
  </script>

  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>
</head>


  <body>

    <div class="container pure-g"><div class="sidebar-left pure-u-1 pure-u-md-1-4" style="background-color: rgb(40, 73, 77); color: rgb(255, 255, 255); background-image: url(/bg.jpg);"><header class="masthead">
  <div class="avatar"><img src="/head.jpg" class="avatar-image" alt="liujiyu">
    </div>
  <div class="masthead-title">
    <a href="/" title="Home">Liujiyu's blog</a>
  </div>
  <div class="masthead-tagline">
    <small>learn & record</small>
  </div><nav class="navigation">
    <ul class="navigation-list"><li class="navigation-item">
        <a onclick="sessionStorage.setItem('forceCheckScroll', 'true')" href="/">Blog</a>
      </li><li class="navigation-item">
        <a onclick="sessionStorage.setItem('forceCheckScroll', 'true')" href="/about/">About</a>
      </li></ul>
  </nav><div class="social pure-menu pure-menu-horizontal">
      <ul class="social-icons pure-menu-list">
      <li class="pure-menu-item">
          <a class="social-icon pure-menu-link" href="mailto://liujiyu@zju.edu.cn">
            <i class="fas fa-envelope" title="Email"></i>
          </a>
        </li><li class="pure-menu-item">
          <a class="social-icon pure-menu-link" href="https://github.com/Liujiyu20000308">
            <i class="fab fa-github" title="GitHub"></i>
          </a>
        </li>
      </ul>
    </div>
</header>
</div>

      <div class="content pure-u-1 pure-u-md-1-2"><main>
  <article class="post">
  <h1 class="post-title">设计模式</h1>
  <div class="post-meta"><time datetime="2024-10-27T10:00:00+08:00" itemprop="datePublished">27 Oct 2024</time></div>

  <h3 id="一创建型模式">一、创建型模式</h3>

<p><strong>1. 单例模式（Singleton Pattern）</strong></p>

<p><strong>概念：</strong>
确保一个类只有一个实例，并提供一个全局访问点。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要全局唯一的对象，例如日志记录器、线程池、配置管理器等。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="k">static</span> <span class="n">Logger</span><span class="o">*</span> <span class="n">instance</span><span class="p">;</span>
    <span class="n">Logger</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// 私有构造函数，防止外部实例化</span>
<span class="nl">public:</span>
    <span class="k">static</span> <span class="n">Logger</span><span class="o">*</span> <span class="n">getInstance</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">instance</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">instance</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">log</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Log: "</span> <span class="o">&lt;&lt;</span> <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 初始化静态成员</span>
<span class="n">Logger</span><span class="o">*</span> <span class="n">Logger</span><span class="o">::</span><span class="n">instance</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Logger</span><span class="o">*</span> <span class="n">logger1</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">::</span><span class="n">getInstance</span><span class="p">();</span>
    <span class="n">Logger</span><span class="o">*</span> <span class="n">logger2</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">::</span><span class="n">getInstance</span><span class="p">();</span>

    <span class="n">logger1</span><span class="o">-&gt;</span><span class="n">log</span><span class="p">(</span><span class="s">"This is a log message."</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">logger1</span> <span class="o">==</span> <span class="n">logger2</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Logger1 and Logger2 are the same instance."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Logger1 and Logger2 are different instances."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Log: This is a log message.
Logger1 and Logger2 are the same instance.
</code></pre></div></div>

<hr />

<p><strong>2. 工厂方法模式（Factory Method Pattern）</strong></p>

<p><strong>概念：</strong>
定义一个创建对象的接口，但由子类决定要实例化的类是哪一个。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要在不指定具体类的情况下创建对象。</li>
  <li>客户端不需要知道所创建对象的类。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Product</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">use</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteProductA</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Product</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">use</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Using Product A"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteProductB</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Product</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">use</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Using Product B"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Factory</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="n">Product</span><span class="o">*</span> <span class="n">createProduct</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">FactoryA</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Factory</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Product</span><span class="o">*</span> <span class="n">createProduct</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ConcreteProductA</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">FactoryB</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Factory</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Product</span><span class="o">*</span> <span class="n">createProduct</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ConcreteProductB</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Factory</span><span class="o">*</span> <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FactoryA</span><span class="p">();</span>
    <span class="n">Product</span><span class="o">*</span> <span class="n">product</span> <span class="o">=</span> <span class="n">factory</span><span class="o">-&gt;</span><span class="n">createProduct</span><span class="p">();</span>
    <span class="n">product</span><span class="o">-&gt;</span><span class="n">use</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">product</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">factory</span><span class="p">;</span>

    <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FactoryB</span><span class="p">();</span>
    <span class="n">product</span> <span class="o">=</span> <span class="n">factory</span><span class="o">-&gt;</span><span class="n">createProduct</span><span class="p">();</span>
    <span class="n">product</span><span class="o">-&gt;</span><span class="n">use</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">product</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">factory</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Using Product A
Using Product B
</code></pre></div></div>

<hr />

<p><strong>3. 抽象工厂模式（Abstract Factory Pattern）</strong></p>

<p><strong>概念：</strong>
提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要创建一组相关或相互依赖的对象。</li>
  <li>系统需要独立于产品的创建方式。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="c1">// 抽象产品：按钮</span>
<span class="k">class</span> <span class="nc">Button</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">draw</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 具体产品：Windows风格按钮</span>
<span class="k">class</span> <span class="nc">WinButton</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Button</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">draw</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Draw a Windows Button."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 具体产品：Mac风格按钮</span>
<span class="k">class</span> <span class="nc">MacButton</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Button</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">draw</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Draw a Mac Button."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 抽象工厂</span>
<span class="k">class</span> <span class="nc">GUIFactory</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="n">Button</span><span class="o">*</span> <span class="n">createButton</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 具体工厂：Windows工厂</span>
<span class="k">class</span> <span class="nc">WinFactory</span> <span class="o">:</span> <span class="k">public</span> <span class="n">GUIFactory</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Button</span><span class="o">*</span> <span class="n">createButton</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">WinButton</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 具体工厂：Mac工厂</span>
<span class="k">class</span> <span class="nc">MacFactory</span> <span class="o">:</span> <span class="k">public</span> <span class="n">GUIFactory</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Button</span><span class="o">*</span> <span class="n">createButton</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">MacButton</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">GUIFactory</span><span class="o">*</span> <span class="n">factory</span><span class="p">;</span>
    <span class="n">Button</span><span class="o">*</span> <span class="n">button</span><span class="p">;</span>

    <span class="c1">// 假设我们需要创建Windows风格的UI组件</span>
    <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WinFactory</span><span class="p">();</span>
    <span class="n">button</span> <span class="o">=</span> <span class="n">factory</span><span class="o">-&gt;</span><span class="n">createButton</span><span class="p">();</span>
    <span class="n">button</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">button</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">factory</span><span class="p">;</span>

    <span class="c1">// 创建Mac风格的UI组件</span>
    <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MacFactory</span><span class="p">();</span>
    <span class="n">button</span> <span class="o">=</span> <span class="n">factory</span><span class="o">-&gt;</span><span class="n">createButton</span><span class="p">();</span>
    <span class="n">button</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">button</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">factory</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Draw a Windows Button.
Draw a Mac Button.
</code></pre></div></div>

<hr />

<p><strong>4. 建造者模式（Builder Pattern）</strong></p>

<p><strong>概念：</strong>
将一个复杂对象的构建与其表示分离，使得同样的构建过程可以创建不同的表示。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要创建复杂对象，其构建过程独立于部件的组成。</li>
  <li>需要创建不同表示的对象。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Product</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">setPartA</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">partA</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">partA</span> <span class="o">=</span> <span class="n">partA</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">setPartB</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">partB</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">partB</span> <span class="o">=</span> <span class="n">partB</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">setPartC</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">partC</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">partC</span> <span class="o">=</span> <span class="n">partC</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">show</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Product Parts: "</span> <span class="o">&lt;&lt;</span> <span class="n">partA</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">partB</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">partC</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">partA</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">partB</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">partC</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Builder</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">buildPartA</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">buildPartB</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">buildPartC</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="n">Product</span><span class="o">*</span> <span class="n">getResult</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteBuilder</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Builder</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">Product</span><span class="o">*</span> <span class="n">product</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">ConcreteBuilder</span><span class="p">()</span> <span class="p">{</span> <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Product</span><span class="p">();</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">ConcreteBuilder</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="n">product</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">buildPartA</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">product</span><span class="o">-&gt;</span><span class="n">setPartA</span><span class="p">(</span><span class="s">"Part A"</span><span class="p">);</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">buildPartB</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">product</span><span class="o">-&gt;</span><span class="n">setPartB</span><span class="p">(</span><span class="s">"Part B"</span><span class="p">);</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">buildPartC</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">product</span><span class="o">-&gt;</span><span class="n">setPartC</span><span class="p">(</span><span class="s">"Part C"</span><span class="p">);</span> <span class="p">}</span>
    <span class="n">Product</span><span class="o">*</span> <span class="n">getResult</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">product</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Director</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">construct</span><span class="p">(</span><span class="n">Builder</span><span class="o">*</span> <span class="n">builder</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">builder</span><span class="o">-&gt;</span><span class="n">buildPartA</span><span class="p">();</span>
        <span class="n">builder</span><span class="o">-&gt;</span><span class="n">buildPartB</span><span class="p">();</span>
        <span class="n">builder</span><span class="o">-&gt;</span><span class="n">buildPartC</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Director</span> <span class="n">director</span><span class="p">;</span>
    <span class="n">Builder</span><span class="o">*</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteBuilder</span><span class="p">();</span>
    <span class="n">director</span><span class="p">.</span><span class="n">construct</span><span class="p">(</span><span class="n">builder</span><span class="p">);</span>
    <span class="n">Product</span><span class="o">*</span> <span class="n">product</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">getResult</span><span class="p">();</span>
    <span class="n">product</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">builder</span><span class="p">;</span> <span class="c1">// 注意，这里删除builder时也会删除product</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Product Parts: Part A, Part B, Part C
</code></pre></div></div>

<hr />

<h3 id="二结构型模式">二、结构型模式</h3>

<p><strong>1. 适配器模式（Adapter Pattern）</strong></p>

<p><strong>概念：</strong>
将一个类的接口转换成客户希望的另一个接口，使得原本由于接口不兼容而不能一起工作的类可以协同工作。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要使用一个已有的类，而它的接口不符合需求。</li>
  <li>希望创建一个可重用的类，用于与一些彼此之间没有太大关联的类一起工作。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="c1">// 目标接口</span>
<span class="k">class</span> <span class="nc">Target</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">request</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 需要适配的类</span>
<span class="k">class</span> <span class="nc">Adaptee</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">specificRequest</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Adaptee's specific request."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 适配器</span>
<span class="k">class</span> <span class="nc">Adapter</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Target</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">Adaptee</span><span class="o">*</span> <span class="n">adaptee</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Adapter</span><span class="p">(</span><span class="n">Adaptee</span><span class="o">*</span> <span class="n">a</span><span class="p">)</span> <span class="o">:</span> <span class="n">adaptee</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">request</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">adaptee</span><span class="o">-&gt;</span><span class="n">specificRequest</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Adaptee</span><span class="o">*</span> <span class="n">adaptee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Adaptee</span><span class="p">();</span>
    <span class="n">Target</span><span class="o">*</span> <span class="n">target</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Adapter</span><span class="p">(</span><span class="n">adaptee</span><span class="p">);</span>
    <span class="n">target</span><span class="o">-&gt;</span><span class="n">request</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">target</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">adaptee</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Adaptee's specific request.
</code></pre></div></div>

<hr />

<p><strong>2. 装饰器模式（Decorator Pattern）</strong></p>

<p><strong>概念：</strong>
动态地给一个对象添加一些额外的职责，就增加功能来说，装饰器模式比生成子类更为灵活。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要在不影响其他对象的情况下，以动态、透明的方式给单个对象添加职责。</li>
  <li>需要对对象进行一些额外的功能拓展。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Component</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">operation</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Component</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteComponent</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Component</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">operation</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ConcreteComponent operation."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Decorator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Component</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">Component</span><span class="o">*</span> <span class="n">component</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Decorator</span><span class="p">(</span><span class="n">Component</span><span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="o">:</span> <span class="n">component</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{}</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Decorator</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="n">component</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">operation</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">component</span><span class="o">-&gt;</span><span class="n">operation</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteDecorator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Decorator</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">ConcreteDecorator</span><span class="p">(</span><span class="n">Component</span><span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="o">:</span> <span class="n">Decorator</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">operation</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">Decorator</span><span class="o">::</span><span class="n">operation</span><span class="p">();</span>
        <span class="n">addedBehavior</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">addedBehavior</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ConcreteDecorator added behavior."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Component</span><span class="o">*</span> <span class="n">component</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteComponent</span><span class="p">();</span>
    <span class="n">Component</span><span class="o">*</span> <span class="n">decorator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteDecorator</span><span class="p">(</span><span class="n">component</span><span class="p">);</span>
    <span class="n">decorator</span><span class="o">-&gt;</span><span class="n">operation</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">decorator</span><span class="p">;</span> <span class="c1">// 会递归删除component</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ConcreteComponent operation.
ConcreteDecorator added behavior.
</code></pre></div></div>

<hr />

<p><strong>3. 代理模式（Proxy Pattern）</strong></p>

<p><strong>概念：</strong>
为其他对象提供一种代理以控制对这个对象的访问。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要为某对象提供代理以控制对它的访问。</li>
  <li>远程代理、本地代理、虚代理等。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Subject</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">request</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Subject</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">RealSubject</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Subject</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">request</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"RealSubject handling request."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Proxy</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Subject</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">RealSubject</span><span class="o">*</span> <span class="n">realSubject</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Proxy</span><span class="p">()</span> <span class="o">:</span> <span class="n">realSubject</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">)</span> <span class="p">{}</span>
    <span class="o">~</span><span class="n">Proxy</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="n">realSubject</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">request</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">realSubject</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">realSubject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RealSubject</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Proxy delegating request to RealSubject."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">realSubject</span><span class="o">-&gt;</span><span class="n">request</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Subject</span><span class="o">*</span> <span class="n">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Proxy</span><span class="p">();</span>
    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">request</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">subject</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Proxy delegating request to RealSubject.
RealSubject handling request.
</code></pre></div></div>

<hr />

<h3 id="三行为型模式">三、行为型模式</h3>

<p><strong>1. 策略模式（Strategy Pattern）</strong></p>

<p><strong>概念：</strong>
定义一系列的算法，把它们一个个封装起来，并且使它们可互相替换。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要在不同的情况下使用不同的算法。</li>
  <li>算法在运行时需要互相替换。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Strategy</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">algorithmInterface</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Strategy</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteStrategyA</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Strategy</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">algorithmInterface</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Strategy A algorithm implementation."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteStrategyB</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Strategy</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">algorithmInterface</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Strategy B algorithm implementation."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Context</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">Strategy</span><span class="o">*</span> <span class="n">strategy</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Context</span><span class="p">(</span><span class="n">Strategy</span><span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="o">:</span> <span class="n">strategy</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">{}</span>
    <span class="o">~</span><span class="n">Context</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="n">strategy</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">contextInterface</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">strategy</span><span class="o">-&gt;</span><span class="n">algorithmInterface</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Strategy</span><span class="o">*</span> <span class="n">strategyA</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteStrategyA</span><span class="p">();</span>
    <span class="n">Context</span><span class="o">*</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Context</span><span class="p">(</span><span class="n">strategyA</span><span class="p">);</span>
    <span class="n">context</span><span class="o">-&gt;</span><span class="n">contextInterface</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">context</span><span class="p">;</span>

    <span class="n">Strategy</span><span class="o">*</span> <span class="n">strategyB</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteStrategyB</span><span class="p">();</span>
    <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Context</span><span class="p">(</span><span class="n">strategyB</span><span class="p">);</span>
    <span class="n">context</span><span class="o">-&gt;</span><span class="n">contextInterface</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">context</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Strategy A algorithm implementation.
Strategy B algorithm implementation.
</code></pre></div></div>

<hr />

<p><strong>2. 观察者模式（Observer Pattern）</strong></p>

<p><strong>概念：</strong>
定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>一个对象的改变需要同时改变其他对象，而且不知道有多少对象需要被改变。</li>
  <li>一个抽象模型有两个方面，其中一个方面依赖于另一个方面。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Observer</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Observer</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteObserver</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Observer</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">ConcreteObserver</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span> <span class="n">name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Observer "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" has been notified."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Subject</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">*&gt;</span> <span class="n">observers</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">attach</span><span class="p">(</span><span class="n">Observer</span><span class="o">*</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">observers</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">o</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">detach</span><span class="p">(</span><span class="n">Observer</span><span class="o">*</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">observers</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">remove</span><span class="p">(</span><span class="n">observers</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">observers</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">o</span><span class="p">),</span> <span class="n">observers</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">notify</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">observer</span> <span class="o">:</span> <span class="n">observers</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">observer</span><span class="o">-&gt;</span><span class="n">update</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Subject</span><span class="o">*</span> <span class="n">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subject</span><span class="p">();</span>

    <span class="n">Observer</span><span class="o">*</span> <span class="n">observer1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteObserver</span><span class="p">(</span><span class="s">"A"</span><span class="p">);</span>
    <span class="n">Observer</span><span class="o">*</span> <span class="n">observer2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteObserver</span><span class="p">(</span><span class="s">"B"</span><span class="p">);</span>
    <span class="n">Observer</span><span class="o">*</span> <span class="n">observer3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteObserver</span><span class="p">(</span><span class="s">"C"</span><span class="p">);</span>

    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">attach</span><span class="p">(</span><span class="n">observer1</span><span class="p">);</span>
    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">attach</span><span class="p">(</span><span class="n">observer2</span><span class="p">);</span>
    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">attach</span><span class="p">(</span><span class="n">observer3</span><span class="p">);</span>

    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">notify</span><span class="p">();</span>

    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">detach</span><span class="p">(</span><span class="n">observer2</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"After detaching observer B:"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">subject</span><span class="o">-&gt;</span><span class="n">notify</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">observer1</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">observer2</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">observer3</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">subject</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Observer A has been notified.
Observer B has been notified.
Observer C has been notified.
After detaching observer B:
Observer A has been notified.
Observer C has been notified.
</code></pre></div></div>

<hr />

<p><strong>3. 命令模式（Command Pattern）</strong></p>

<p><strong>概念：</strong>
将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化，对请求排队或记录请求日志，以及支持可撤销的操作。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>需要对操作进行参数化。</li>
  <li>需要将操作放入队列中执行、日志记录、支持撤销操作。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Command</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">execute</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Command</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Receiver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">action</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Receiver action performed."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Command</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">Receiver</span><span class="o">*</span> <span class="n">receiver</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">ConcreteCommand</span><span class="p">(</span><span class="n">Receiver</span><span class="o">*</span> <span class="n">r</span><span class="p">)</span> <span class="o">:</span> <span class="n">receiver</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">execute</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">receiver</span><span class="o">-&gt;</span><span class="n">action</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Invoker</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Command</span><span class="o">*&gt;</span> <span class="n">commands</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">setCommand</span><span class="p">(</span><span class="n">Command</span><span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">commands</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">executeCommands</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">command</span> <span class="o">:</span> <span class="n">commands</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">command</span><span class="o">-&gt;</span><span class="n">execute</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="o">~</span><span class="n">Invoker</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">command</span> <span class="o">:</span> <span class="n">commands</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">delete</span> <span class="n">command</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Receiver</span><span class="o">*</span> <span class="n">receiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Receiver</span><span class="p">();</span>
    <span class="n">Command</span><span class="o">*</span> <span class="n">command</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteCommand</span><span class="p">(</span><span class="n">receiver</span><span class="p">);</span>

    <span class="n">Invoker</span><span class="o">*</span> <span class="n">invoker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Invoker</span><span class="p">();</span>
    <span class="n">invoker</span><span class="o">-&gt;</span><span class="n">setCommand</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
    <span class="n">invoker</span><span class="o">-&gt;</span><span class="n">executeCommands</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">invoker</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">receiver</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Receiver action performed.
</code></pre></div></div>

<hr />

<p><strong>4. 状态模式（State Pattern）</strong></p>

<p><strong>概念：</strong>
允许一个对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它的类。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>一个对象的行为取决于它的状态，并且它必须在运行时根据状态改变行为。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Context</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">State</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">handle</span><span class="p">(</span><span class="n">Context</span><span class="o">*</span> <span class="n">context</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">State</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteStateA</span> <span class="o">:</span> <span class="k">public</span> <span class="n">State</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">handle</span><span class="p">(</span><span class="n">Context</span><span class="o">*</span> <span class="n">context</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteStateB</span> <span class="o">:</span> <span class="k">public</span> <span class="n">State</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">handle</span><span class="p">(</span><span class="n">Context</span><span class="o">*</span> <span class="n">context</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Context</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">State</span><span class="o">*</span> <span class="n">state</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Context</span><span class="p">(</span><span class="n">State</span><span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="o">:</span> <span class="n">state</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">{}</span>
    <span class="o">~</span><span class="n">Context</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="n">state</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">setState</span><span class="p">(</span><span class="n">State</span><span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="n">state</span><span class="p">;</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">request</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">state</span><span class="o">-&gt;</span><span class="n">handle</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">ConcreteStateA</span><span class="o">::</span><span class="n">handle</span><span class="p">(</span><span class="n">Context</span><span class="o">*</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"State A handling request. Switching to State B."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">context</span><span class="o">-&gt;</span><span class="n">setState</span><span class="p">(</span><span class="k">new</span> <span class="n">ConcreteStateB</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ConcreteStateB</span><span class="o">::</span><span class="n">handle</span><span class="p">(</span><span class="n">Context</span><span class="o">*</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"State B handling request. Switching to State A."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">context</span><span class="o">-&gt;</span><span class="n">setState</span><span class="p">(</span><span class="k">new</span> <span class="n">ConcreteStateA</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Context</span><span class="o">*</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Context</span><span class="p">(</span><span class="k">new</span> <span class="n">ConcreteStateA</span><span class="p">());</span>

    <span class="n">context</span><span class="o">-&gt;</span><span class="n">request</span><span class="p">();</span>
    <span class="n">context</span><span class="o">-&gt;</span><span class="n">request</span><span class="p">();</span>
    <span class="n">context</span><span class="o">-&gt;</span><span class="n">request</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">context</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>State A handling request. Switching to State B.
State B handling request. Switching to State A.
State A handling request. Switching to State B.
</code></pre></div></div>

<hr />

<p><strong>5. 模板方法模式（Template Method Pattern）</strong></p>

<p><strong>概念：</strong>
定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变算法的结构即可重新定义算法的某些步骤。</p>

<p><strong>应用场景：</strong></p>
<ul>
  <li>一次性实现一个算法的不变部分，并将可变的行为留给子类来实现。</li>
  <li>各子类中公共的行为被提取出来并集中到一个公共父类中，以避免代码重复。</li>
</ul>

<p><strong>示例：</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">AbstractClass</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">templateMethod</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">primitiveOperation1</span><span class="p">();</span>
        <span class="n">primitiveOperation2</span><span class="p">();</span>
        <span class="n">hook</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">primitiveOperation1</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">primitiveOperation2</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">hook</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// 钩子方法，子类可选择性重写</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">AbstractClass</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ConcreteClass</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AbstractClass</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">primitiveOperation1</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ConcreteClass Operation1 implementation."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">primitiveOperation2</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ConcreteClass Operation2 implementation."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">hook</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ConcreteClass optional hook implementation."</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 使用示例</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">AbstractClass</span><span class="o">*</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteClass</span><span class="p">();</span>
    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">templateMethod</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">obj</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>运行结果：</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ConcreteClass Operation1 implementation.
ConcreteClass Operation2 implementation.
ConcreteClass optional hook implementation.
</code></pre></div></div>

<hr />

<h3 id="总结">总结</h3>

<p>通过在每个设计模式的示例中添加<code class="language-plaintext highlighter-rouge">main</code>函数，我们可以更直观地看到这些模式在实际开发中的应用方式。每个<code class="language-plaintext highlighter-rouge">main</code>函数都演示了如何创建和使用相应的设计模式，帮助理解其工作原理和使用场景。在实际项目中，根据具体需求和场景，选择合适的设计模式能够提高代码的可维护性、可扩展性和可读性。</p>


  
    
      <div class="post-tags-section">
  <i class="post-tags-icon fas fa-tags"></i>
  <ul class="post-tags"><li>
        <a class="post-tag" href="/tags/#设计模式">设计模式</a></li></ul>
</div>

  

  
</article>


<aside class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <a href="/2024/10/21/other/">
          其他面经
          <small><time datetime="2024-10-21T10:00:00+08:00">21 Oct 2024</time></small>
        </a>
      </li>
    
      <li>
        <a href="/2024/10/21/Cpp/">
          C++补充
          <small><time datetime="2024-10-21T10:00:00+08:00">21 Oct 2024</time></small>
        </a>
      </li>
    
      <li>
        <a href="/2024/10/21/Cpp11_14/">
          C++11\14特性
          <small><time datetime="2024-10-21T10:00:00+08:00">21 Oct 2024</time></small>
        </a>
      </li>
    
  </ul>
</aside>


</main>

<footer class="footer"><small>
    &copy; 2023&nbsp;-&nbsp;2025 <a href="https://github.com/Liujiyu20000308">liujiyu</a>. All rights reserved.
    Powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/vszhub/not-pure-poole">Not Pure Poole</a>.
  </small>
</footer>
</div>
      <div class="sidebar-right pure-u-1 pure-u-md-1-4">
<div  class="toc-wrapper">
  <h2 class="toc-title">Table of Contents</h2>
    <nav class="toc-nav">
      <ul class="toc">
  <li><a href="#一创建型模式">一、创建型模式</a></li>
  <li><a href="#二结构型模式">二、结构型模式</a></li>
  <li><a href="#三行为型模式">三、行为型模式</a></li>
  <li><a href="#总结">总结</a></li>
</ul>

  </nav>
</div>

</div>
    </div>

    <script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script><script>
  function strip(str, remove) {
    while (str.length > 0 && remove.indexOf(str.charAt(0)) != -1) {
      str = str.substr(1);
    }
    while (str.length > 0 && remove.indexOf(str.charAt(str.length - 1)) != -1) {
      str = str.substr(0, str.length - 1);
    }
    return str;
  }

  function scroll() {
    console.log('scroll');
    window.scrollTo({
      left: 0, 
      top: window.innerHeight,
      behavior: 'smooth'
    });
    sessionStorage.removeItem('forceCheckScroll');
  }

  const forceCheckScroll = sessionStorage.getItem('forceCheckScroll') === 'true';
  const checkScroll = strip(window.location.pathname, '/') !== strip('', '/');

  if (forceCheckScroll || checkScroll) {
    const maxWidth = "(max-width: 48rem)";
    const result = window.matchMedia(maxWidth);
    if (result.matches) {
      scroll();
    } else {
      result.addListener((match) => {
        if (match.media == maxWidth) {
          if (match.matches) {
            scroll();
          }
        }
      });
    }
  }
</script>
</body>
</html>
