---
layout: post
title: 其他面经
date: 2024-10-21 10:00 +0800
tags: [C++]
toc: true
---

### 设计模式

[设计模式详解](https://refactoringguru.cn/design-patterns/catalog)

### C++性能检测用过什么工具

### gdb看backtrace和切换线程

以下是一些常用的多线程调试方法：

##### 1. 查看线程
- **显示所有线程**：
  ```bash
  info threads
  ```
  这个命令会显示当前所有线程的编号、线程ID（TID）、状态以及当前的执行位置。每个线程都有一个 `gdb` 编号，可以用来切换到指定线程。

##### 2. 切换线程
- **切换到指定线程**：
  ```bash
  thread THREAD_NUM
  ```
  这里的 `THREAD_NUM` 是 `info threads` 命令输出中线程的编号。切换到指定线程后，可以使用正常的调试命令，比如 `backtrace` 查看调用栈，`print` 查看变量等。

##### 3. 设置线程断点
- **对特定线程设置断点**：
  ```bash
  break function_name thread THREAD_NUM
  ```
  在指定线程上设置断点。这样只有当指定线程执行到该断点时，程序才会暂停。

- **对所有线程设置断点**：
  正常的断点会影响所有线程，因此可以直接使用 `break` 命令，而无需特别指定线程。

##### 4. 控制线程
- **暂停/继续特定线程**：
  - `continue`: 继续当前线程的执行。
  - `thread THREAD_NUM`: 切换到特定线程后，可以继续执行该线程的调试流程。
  
  **注意**：`continue` 命令会让所有线程继续运行，想要单步调试特定线程时可以结合 `next` 和 `step` 命令操作。

##### 5. 锁和竞态调试
- **设置断点和观察变量**：
  可以在临界区或共享资源访问代码处设置断点，使用 `watch` 命令观察共享变量的值变化，帮助发现竞争条件或死锁情况。
  ```bash
  watch var
  ```

- **死锁调试**：
  使用 `thread apply all backtrace` 查看所有线程的调用栈，确定是否有线程卡在锁等待或死锁状态。

### 6. 常用命令总结
- **列出所有线程**：
  ```bash
  info threads
  ```

- **切换线程**：
  ```bash
  thread THREAD_NUM
  ```

- **对指定线程设置断点**：
  ```bash
  break func_name thread THREAD_NUM
  ```

- **查看所有线程的调用栈**：
  ```bash
  thread apply all backtrace
  ```

- **查看特定线程的调用栈**：
  ```bash
  backtrace
  ```

- **继续执行所有线程**：
  ```bash
  continue
  ```


### 全部加载到内存太大了怎么办

### 数据迁移怎么保证一致性

### 新旧数据不兼容怎么办


### 有哪些加速计算的方法
